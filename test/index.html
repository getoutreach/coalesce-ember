<!doctype html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Coalesce-Ember Tests</title>
    <link rel="stylesheet" href="vendor/mocha/mocha.css">
</head>
<body>
    <div id="mocha"></div>
    <!-- ES6 -->
    <script src="vendor/babel-core/browser-polyfill.js"></script>
    <script src="vendor/babel-core/external-helpers.js"></script>
    <script src="vendor/es6-module-loader/dist/es6-module-loader.js"></script>
    <script src="vendor/systemjs/dist/system.js"></script>

    <!-- Testing dependencies -->
    <script src="vendor/sinonjs/sinon.js"></script>
    <script src="vendor/mocha/mocha.js"></script>
    <script src="vendor/chai/chai.js"></script>
    <script src="/testem.js"></script>
    
    <!-- Coalesce dependencies -->
    <script src="vendor/jquery/dist/jquery.js"></script>
    <script src="vendor/lodash/dist/lodash.js"></script>
    <script src="vendor/handlebars/handlebars.runtime.js"></script>
    <script src="vendor/ember/ember.js"></script>
    <script src="vendor/ember-mocha-adapter/adapter.js"></script>

    <!-- Coalesce modules -->
    <script src="vendor/coalesce/dist/coalesce.system.js"></script>
    <script src="../coalesce-ember.system.js"></script>
    <script src="coalesce-ember-test.system.js"></script>
    <script>
      mocha.setup('bdd');
      var expect = chai.expect
      
      System.import('coalesce-ember').then(function(module) {
        this.Cs = module['default'];

        var promises = [];
        Object.keys(System.defined).forEach(function(moduleName) {
          if ((/coalesce\-ember\-test/).test(moduleName)) {
            promises.push(System.import(moduleName));
          }
        });

        Promise.all(promises).then(function() {
          mocha.run();
        });
      });
    </script>
</body>
</html>
